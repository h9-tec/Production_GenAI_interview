<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#10B981;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EA580C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F97316;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="500" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">RAG Pipeline Architecture</text>
  
  <!-- User Query Box -->
  <rect x="30" y="70" width="120" height="60" rx="10" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="90" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="white" font-weight="bold">User Query</text>
  
  <!-- Arrow 1 -->
  <path d="M150 100 L190 100" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <defs><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/></marker></defs>
  
  <!-- Query Embedding -->
  <rect x="200" y="70" width="120" height="60" rx="10" fill="url(#greenGrad)" filter="url(#shadow)"/>
  <text x="260" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Query</text>
  <text x="260" y="112" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Embedding</text>
  
  <!-- Arrow 2 -->
  <path d="M320 100 L360 100" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Vector Database -->
  <rect x="370" y="55" width="160" height="90" rx="10" fill="url(#orangeGrad)" filter="url(#shadow)"/>
  <text x="450" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="white" font-weight="bold">Vector Database</text>
  <text x="450" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Similarity Search</text>
  <text x="450" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Top-K Retrieval</text>
  
  <!-- Arrow 3 -->
  <path d="M530 100 L570 100" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Reranker -->
  <rect x="580" y="70" width="120" height="60" rx="10" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="640" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="white" font-weight="bold">Reranker</text>
  
  <!-- Arrow 4 -->
  <path d="M700 100 L740 100" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Context Assembly -->
  <rect x="750" y="70" width="120" height="60" rx="10" fill="url(#greenGrad)" filter="url(#shadow)"/>
  <text x="810" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Context</text>
  <text x="810" y="112" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Assembly</text>
  
  <!-- Document Processing Pipeline (Bottom) -->
  <text x="450" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#475569">Document Ingestion Pipeline</text>
  
  <!-- Documents -->
  <rect x="30" y="220" width="100" height="70" rx="8" fill="#e2e8f0" stroke="#94a3b8" stroke-width="2"/>
  <text x="80" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#475569" font-weight="bold">Documents</text>
  <text x="80" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">PDF, HTML, TXT</text>
  
  <!-- Arrow -->
  <path d="M130 255 L170 255" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Chunking -->
  <rect x="180" y="220" width="120" height="70" rx="8" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="240" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Chunking</text>
  <text x="240" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Semantic/Recursive</text>
  
  <!-- Arrow -->
  <path d="M300 255 L340 255" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Embedding -->
  <rect x="350" y="220" width="120" height="70" rx="8" fill="url(#greenGrad)" filter="url(#shadow)"/>
  <text x="410" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Embedding</text>
  <text x="410" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Vector Generation</text>
  
  <!-- Arrow -->
  <path d="M470 255 L510 255" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Indexing -->
  <rect x="520" y="220" width="120" height="70" rx="8" fill="url(#orangeGrad)" filter="url(#shadow)"/>
  <text x="580" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Indexing</text>
  <text x="580" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">HNSW / IVF</text>
  
  <!-- Arrow to DB -->
  <path d="M580 220 L580 145 L450 145" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  
  <!-- LLM Generation Section -->
  <text x="450" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#475569">Generation Pipeline</text>
  
  <!-- Context + Query -->
  <rect x="150" y="370" width="140" height="70" rx="8" fill="#e2e8f0" stroke="#94a3b8" stroke-width="2"/>
  <text x="220" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#475569" font-weight="bold">Context + Query</text>
  <text x="220" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">Prompt Assembly</text>
  
  <!-- Arrow -->
  <path d="M290 405 L350 405" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- LLM -->
  <rect x="360" y="365" width="180" height="80" rx="10" fill="url(#blueGrad)" filter="url(#shadow)"/>
  <text x="450" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="white" font-weight="bold">LLM</text>
  <text x="450" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">GPT-4 / Claude / Llama</text>
  
  <!-- Arrow -->
  <path d="M540 405 L600 405" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Response -->
  <rect x="610" y="370" width="140" height="70" rx="8" fill="url(#greenGrad)" filter="url(#shadow)"/>
  <text x="680" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="white" font-weight="bold">Response</text>
  <text x="680" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">+ Citations</text>
  
  <!-- Connection from Context Assembly to Generation -->
  <path d="M810 130 L810 350 L680 350 L680 370" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Stats Box -->
  <rect x="700" y="220" width="170" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="785" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#92400e" font-weight="bold">Key Stats</text>
  <text x="785" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#78350f">80% failures from chunking</text>
  <text x="785" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#78350f">Hybrid search: +15-30%</text>
  <text x="785" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#78350f">Reranking: highest ROI</text>
</svg>
